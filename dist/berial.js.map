{"version":3,"file":"berial.js","sources":["../index.js"],"sourcesContent":["let apps = []\r\n\r\nexport function define(tag, component, route) {\r\n  class Berial extends HTMLElement {\r\n    static get name() {\r\n      return tag\r\n    }\r\n\r\n    constructor() {\r\n      super()\r\n      for (const k in component) {\r\n        this[k] = component[k]\r\n      }\r\n    }\r\n\r\n    connectedCallback() {\r\n      this.attachShadow({\r\n        mode: 'open',\r\n      })\r\n\r\n      apps.push({\r\n        tag,\r\n        component,\r\n        route,\r\n        element: this,\r\n      })\r\n\r\n      invoke()\r\n    }\r\n  }\r\n  const hasDef = window.customElements.get(tag)\r\n  if (!hasDef) {\r\n    customElements.define(tag, Berial)\r\n  }\r\n}\r\n\r\nfunction invoke() {\r\n  apps.forEach((app) => {\r\n      const host = new Proxy(app.element, {\r\n        get(target, key) {\r\n          return target[key]\r\n        },\r\n        set(target, key, val) {\r\n          target[key] = val\r\n          process(app, host)\r\n          return true\r\n        },\r\n      })\r\n      process(app,host)\r\n    })\r\n}\r\n\r\nfunction process(app, host) {\r\n  const path = window.location.hash || window.location.pathname || '/'\r\n\r\n  if (app.route === path) {\r\n    app.component.mount(host)\r\n  } else {\r\n    app.component.unmount(host)\r\n  }\r\n}\r\n\r\nwindow.addEventListener('hashchange', invoke)\r\nwindow.addEventListener('popstate', invoke)\r\n"],"names":[],"mappings":";;;;;;EAAA,IAAI,IAAI,GAAG,GAAE;AACb;EACO,SAAS,MAAM,CAAC,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE;EAC9C,EAAE,MAAM,MAAM,SAAS,WAAW,CAAC;EACnC,IAAI,WAAW,IAAI,GAAG;EACtB,MAAM,OAAO,GAAG;EAChB,KAAK;AACL;EACA,IAAI,WAAW,GAAG;EAClB,MAAM,KAAK,GAAE;EACb,MAAM,KAAK,MAAM,CAAC,IAAI,SAAS,EAAE;EACjC,QAAQ,IAAI,CAAC,CAAC,CAAC,GAAG,SAAS,CAAC,CAAC,EAAC;EAC9B,OAAO;EACP,KAAK;AACL;EACA,IAAI,iBAAiB,GAAG;EACxB,MAAM,IAAI,CAAC,YAAY,CAAC;EACxB,QAAQ,IAAI,EAAE,MAAM;EACpB,OAAO,EAAC;AACR;EACA,MAAM,IAAI,CAAC,IAAI,CAAC;EAChB,QAAQ,GAAG;EACX,QAAQ,SAAS;EACjB,QAAQ,KAAK;EACb,QAAQ,OAAO,EAAE,IAAI;EACrB,OAAO,EAAC;AACR;EACA,MAAM,MAAM,GAAE;EACd,KAAK;EACL,GAAG;EACH,EAAE,MAAM,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,EAAC;EAC/C,EAAE,IAAI,CAAC,MAAM,EAAE;EACf,IAAI,cAAc,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,EAAC;EACtC,GAAG;EACH,CAAC;AACD;EACA,SAAS,MAAM,GAAG;EAClB,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK;EACxB,MAAM,MAAM,IAAI,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC,OAAO,EAAE;EAC1C,QAAQ,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE;EACzB,UAAU,OAAO,MAAM,CAAC,GAAG,CAAC;EAC5B,SAAS;EACT,QAAQ,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,GAAG,EAAE;EAC9B,UAAU,MAAM,CAAC,GAAG,CAAC,GAAG,IAAG;EAC3B,UAAU,OAAO,CAAC,GAAG,EAAE,IAAI,EAAC;EAC5B,UAAU,OAAO,IAAI;EACrB,SAAS;EACT,OAAO,EAAC;EACR,MAAM,OAAO,CAAC,GAAG,CAAC,IAAI,EAAC;EACvB,KAAK,EAAC;EACN,CAAC;AACD;EACA,SAAS,OAAO,CAAC,GAAG,EAAE,IAAI,EAAE;EAC5B,EAAE,MAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,CAAC,QAAQ,IAAI,IAAG;AACtE;EACA,EAAE,IAAI,GAAG,CAAC,KAAK,KAAK,IAAI,EAAE;EAC1B,IAAI,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAC;EAC7B,GAAG,MAAM;EACT,IAAI,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,EAAC;EAC/B,GAAG;EACH,CAAC;AACD;EACA,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,EAAC;EAC7C,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAM;;;;;;;;;;;;"}
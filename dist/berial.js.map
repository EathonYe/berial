{"version":3,"file":"berial.js","sources":["../src/util.ts","../src/sandbox.ts","../src/html-loader.ts","../src/store.ts","../src/app.ts"],"sourcesContent":["import { Lifecycle, Lifecycles } from './types'\n\nexport function warn(trigger: string): void\nexport function warn(trigger: boolean, msg?: string): void\nexport function warn(trigger: any, msg?: any): void {\n  if (typeof trigger === 'string') msg = trigger\n  if (!trigger) return\n  throw new Error(`[Berial: Warning]: ${msg}`)\n}\n\nexport function error(trigger: string): void\nexport function error(trigger: boolean, msg?: string): void\nexport function error(trigger: any, msg?: any): void {\n  if (typeof trigger === 'string') msg = trigger\n  if (!trigger) return\n  throw new Error(`[Berial: Error]: ${msg}`)\n}\n\nexport function request(url: string, option?: RequestInit) {\n  if (!window.fetch) {\n    error(\n      \"It looks like that your browser doesn't support fetch. Polyfill is needed before you use it.\"\n    )\n  }\n\n  return fetch(url, {\n    mode: 'cors',\n    ...option\n  }).then((res) => res.text())\n}\n\nexport function lifecycleCheck(lifecycle: Lifecycle | Lifecycles) {\n  const definedLifecycles = new Map<any, boolean>()\n  for (const item in lifecycle) {\n    definedLifecycles.set(item, true)\n  }\n  if (!definedLifecycles.has('bootstrap')) {\n    error(\n      __DEV__,\n      `It looks like that you didn't export the lifecycle hook [bootstrap], which would cause a mistake.`\n    )\n  }\n  if (!definedLifecycles.has('mount')) {\n    error(\n      __DEV__,\n      `It looks like that you didn't export the lifecycle hook [mount], which would cause a big mistake.`\n    )\n  }\n  if (!definedLifecycles.has('unmount')) {\n    error(\n      __DEV__,\n      `It looks like that you didn't export the lifecycle hook [unmount], which would cause a mistake.`\n    )\n  }\n}\n","import { getGlobalStore } from './app'\n\nexport async function loadSandbox(host: HTMLElement) {\n  const rawWindow = window as any\n  const shadowRoot = patchShadowDOM(host.shadowRoot as any)\n  return new Promise(async (resolve) => {\n    const iframe = (await loadIframe()) as any\n    const proxy = new Proxy(iframe.contentWindow, {\n      get(target: any, key: string) {\n        switch (key) {\n          case 'document':\n            return shadowRoot\n          case 'globalStore':\n            return getGlobalStore()\n          default:\n            return target[key] || rawWindow[key]\n        }\n      },\n      set(target, key, val) {\n        target[key] = val\n        return true\n      }\n    })\n    resolve(proxy)\n  })\n}\n\nasync function loadIframe() {\n  return new Promise((resolve) => {\n    const iframe = document.createElement('iframe') as any\n    iframe.style.cssText =\n      'position: absolute; top: -20000px; width: 1px; height: 1px;'\n\n    document.body.append(iframe)\n    iframe.onload = () => resolve(iframe)\n  })\n}\n\nfunction patchShadowDOM(shadowRoot: ShadowRoot) {\n  return new Proxy(shadowRoot, {\n    get(target: any, key: string) {\n      return target[key] || (document as any)[key]\n    },\n    set(target, key, val) {\n      target[key] = val\n      return true\n    }\n  })\n}\n","import { PromiseFn, Lifecycles } from './types'\nimport { request } from './util'\nimport { loadSandbox } from './sandbox'\nimport { App } from './types'\n\nconst MATCH_ANY_OR_NO_PROPERTY = /[\"'=\\w\\s/]*/\nconst SCRIPT_URL_RE = new RegExp(\n  '<\\\\s*script' +\n    MATCH_ANY_OR_NO_PROPERTY.source +\n    '(?:src=\"(.+?)\")' +\n    MATCH_ANY_OR_NO_PROPERTY.source +\n    '(?:\\\\/>|>[\\\\s]*<\\\\s*/script>)?',\n  'g'\n)\nconst SCRIPT_CONTENT_RE = new RegExp(\n  '<\\\\s*script' +\n    MATCH_ANY_OR_NO_PROPERTY.source +\n    '>([\\\\w\\\\W]+?)<\\\\s*/script>',\n  'g'\n)\nconst MATCH_NONE_QUOTE_MARK = /[^\"]/\nconst CSS_URL_RE = new RegExp(\n  '<\\\\s*link[^>]*' +\n    'href=\"(' +\n    MATCH_NONE_QUOTE_MARK.source +\n    '+.css' +\n    MATCH_NONE_QUOTE_MARK.source +\n    '*)\"' +\n    MATCH_ANY_OR_NO_PROPERTY.source +\n    '>(?:\\\\s*<\\\\s*\\\\/link>)?',\n  'g'\n)\nconst STYLE_RE = /<\\s*style\\s*>([^<]*)<\\s*\\/style>/g\nconst BODY_CONTENT_RE = /<\\s*body[^>]*>([\\w\\W]*)<\\s*\\/body>/\nconst SCRIPT_ANY_RE = /<\\s*script[^>]*>[\\s\\S]*?(<\\s*\\/script[^>]*>)/g\nconst TEST_URL = /^(?:https?):\\/\\/[-a-zA-Z0-9.]+/\n\nconst REPLACED_BY_BERIAL = 'Script replaced by Berial.'\n\nexport async function importHtml(app: App) {\n  const template = await request(app.entry as string)\n  const proxy = (await loadSandbox(app.host)) as ProxyConstructor\n  const lifecycle = await loadScript(template, proxy, app.name)\n  const styleNodes = await loadCSS(template)\n  const bodyNode = loadBody(template)\n  return { lifecycle, styleNodes, bodyNode }\n}\n\nexport async function loadScript(\n  template: string,\n  global: ProxyConstructor,\n  name: string\n): Promise<Lifecycles> {\n  const { scriptURLs, scripts } = parseScript(template)\n  const fetchedScripts = await Promise.all(\n    scriptURLs.map((url) => request(url))\n  )\n  const scriptsToLoad = fetchedScripts.concat(scripts)\n\n  let bootstrap: PromiseFn[] = []\n  let unmount: PromiseFn[] = []\n  let mount: PromiseFn[] = []\n  let update: PromiseFn[] = []\n\n  scriptsToLoad.forEach((script) => {\n    const lifecycles = runScript(script, global, name)\n    bootstrap = [...bootstrap, lifecycles.bootstrap]\n    mount = [...mount, lifecycles.mount]\n    unmount = [...unmount, lifecycles.unmount]\n    update = [...update, lifecycles.update]\n  })\n\n  return { bootstrap, unmount, mount, update }\n}\n\nfunction parseScript(template: string) {\n  const scriptURLs: string[] = []\n  const scripts: string[] = []\n  let match\n  while ((match = SCRIPT_URL_RE.exec(template))) {\n    let captured = match[1].trim()\n    if (!captured) continue\n    if (!TEST_URL.test(captured)) {\n      captured = window.location.origin + captured\n    }\n    scriptURLs.push(captured)\n  }\n  while ((match = SCRIPT_CONTENT_RE.exec(template))) {\n    const captured = match[1].trim()\n    if (!captured) continue\n    scripts.push(captured)\n  }\n  return {\n    scriptURLs,\n    scripts\n  }\n}\n\nfunction runScript(script: string, global: ProxyConstructor, umdName: string) {\n  let bootstrap: PromiseFn,\n    mount: PromiseFn,\n    unmount: PromiseFn,\n    update: PromiseFn\n\n  eval(`(function(window) { \n    ${script};\n    bootstrap = window[${umdName}].bootstrap;\n    mount = window[${umdName}].mount;\n    unmount = window[${umdName}].unmount;\n    update = window[${umdName}].update;\n  }).bind(global)(global)`)\n\n  // @ts-ignore\n  return { bootstrap, mount, unmount, update }\n}\n\nasync function loadCSS(template: string) {\n  const { cssURLs, styles } = parseCSS(template)\n  const fetchedStyles = await Promise.all(cssURLs.map((url) => request(url)))\n  return toStyleNodes(fetchedStyles.concat(styles))\n\n  function toStyleNodes(styles: string[]) {\n    return styles.map((style) => {\n      const styleNode = document.createElement('style')\n      styleNode.appendChild(document.createTextNode(style))\n      return styleNode\n    })\n  }\n}\n\nfunction parseCSS(template: string) {\n  const cssURLs: string[] = []\n  const styles: string[] = []\n  let match\n  while ((match = CSS_URL_RE.exec(template))) {\n    let captured = match[1].trim()\n    if (!captured) continue\n    if (!TEST_URL.test(captured)) {\n      captured = window.location.origin + captured\n    }\n    cssURLs.push(captured)\n  }\n  while ((match = STYLE_RE.exec(template))) {\n    const captured = match[1].trim()\n    if (!captured) continue\n    styles.push(captured)\n  }\n  return {\n    cssURLs,\n    styles\n  }\n}\n\nfunction loadBody(template: string) {\n  let bodyContent = template.match(BODY_CONTENT_RE)?.[1] ?? ''\n  bodyContent = bodyContent.replace(SCRIPT_ANY_RE, scriptReplacer)\n\n  const div = document.createElement('div')\n  div.appendChild(document.createTextNode(bodyContent))\n  return div\n\n  function scriptReplacer(substring: string) {\n    const matchedURL = SCRIPT_URL_RE.exec(substring)\n    if (matchedURL) {\n      return `<!-- ${REPLACED_BY_BERIAL} Original script url: ${matchedURL[1]} -->`\n    }\n    return `<!-- ${REPLACED_BY_BERIAL} Original script: inline script -->`\n  }\n}\n","import { getApps, Status } from './app'\n\ntype Store = Record<PropertyKey, any>\n\nlet isUpdating = false\n\nexport function reactiveStore(store: Store) {\n  return new Proxy(store, {\n    get(target, key) {\n      return Reflect.get(target, key)\n    },\n    set(target, key, value) {\n      Reflect.set(target, key, value)\n      isUpdating = true\n      batchUpdate(reactiveStore)\n      return true\n    }\n  })\n}\n\nfunction batchUpdate(store: Store) {\n  if (isUpdating) return\n  const apps = getApps()\n  Promise.resolve().then(() => {\n    isUpdating = false\n    apps.forEach(async (app) => {\n      app.status = Status.UPDATING\n      await app.update(store, apps)\n      app.status = Status.UPDATED\n    })\n  })\n}\n","import { App, Lifecycles } from './types'\nimport { importHtml } from './html-loader'\nimport { reactiveStore } from './store'\nimport { lifecycleCheck } from './util'\n\nexport enum Status {\n  NOT_LOADED = 'NOT_LOADED',\n  LOADING = 'LOADING',\n  NOT_BOOTSTRAPPED = 'NOT_BOOTSTRAPPED',\n  BOOTSTRAPPING = 'BOOTSTRAPPING',\n  NOT_MOUNTED = 'NOT_MOUNTED',\n  MOUNTING = 'MOUNTING',\n  MOUNTED = 'MOUNTED',\n  UPDATING = 'UPDATING',\n  UPDATED = 'UPDATED',\n  UNMOUNTING = 'UNMOUNTING'\n}\n\nlet started = false\nconst apps: App[] = []\nconst globalStore = reactiveStore({})\n\nexport const getApps = () => apps\nexport const getGlobalStore = () => globalStore\n\nexport function register(\n  name: string,\n  entry: string,\n  match: any,\n  props: Record<string, unknown>\n) {\n  apps.push({\n    name,\n    entry,\n    match,\n    props,\n    status: Status.NOT_LOADED\n  } as App)\n}\n\nexport function start() {\n  started = true\n  reroute()\n}\n\nfunction reroute() {\n  const { loads, mounts, unmounts } = getAppChanges()\n  if (started) {\n    return perform()\n  } else {\n    return init()\n  }\n  async function init() {\n    await Promise.all(loads.map(runLoad))\n  }\n  async function perform() {\n    unmounts.map(runUnmount)\n    loads.map(async (app) => {\n      app = await runLoad(app)\n      app = await runBootstrap(app)\n      return runMount(app)\n    })\n    mounts.map(async (app) => {\n      app = await runBootstrap(app)\n      return runMount(app)\n    })\n  }\n}\n\nfunction getAppChanges() {\n  const unmounts: App[] = []\n  const loads: App[] = []\n  const mounts: App[] = []\n  apps.forEach((app) => {\n    const isActive = app.match(window.location)\n    switch (app.status) {\n      case Status.NOT_LOADED:\n      case Status.LOADING:\n        isActive && loads.push(app)\n        break\n      case Status.NOT_BOOTSTRAPPED:\n      case Status.BOOTSTRAPPING:\n      case Status.NOT_MOUNTED:\n        isActive && mounts.push(app)\n        break\n      case Status.MOUNTED:\n        !isActive && unmounts.push(app)\n    }\n  })\n  return { unmounts, loads, mounts }\n}\n\nfunction compose(fns: ((props: any) => Promise<any>)[]) {\n  fns = Array.isArray(fns) ? fns : [fns]\n  return (props: any) =>\n    fns.reduce((p, fn) => p.then(() => fn(props)), Promise.resolve())\n}\n\nasync function runLoad(app: App) {\n  if (app.loaded) {\n    return app.loaded\n  }\n  app.loaded = Promise.resolve().then(async () => {\n    app.status = Status.LOADING\n    let lifecycle: Lifecycles\n    let bodyNode: HTMLDivElement\n    let styleNodes: HTMLStyleElement[]\n    if (typeof app.entry === 'string') {\n      const exports = await importHtml(app)\n      lifecycleCheck(exports.lifecycle)\n      lifecycle = exports.lifecycle\n      bodyNode = exports.bodyNode\n      styleNodes = exports.styleNodes\n    } else {\n      // TODO: 增加 bodyNode, styleNodes, loadScript\n      lifecycle = (await app.entry(app.props)) as any\n      lifecycleCheck(lifecycle)\n    }\n    let host = await loadShadowDOM(app, bodyNode!, styleNodes!)\n    app.status = Status.NOT_BOOTSTRAPPED\n    app.bootstrap = compose(lifecycle.bootstrap)\n    app.mount = compose(lifecycle.mount)\n    app.unmount = compose(lifecycle.unmount)\n    app.update = compose(lifecycle.update)\n    app.host = host\n    delete app.loaded\n    return app\n  })\n  return app.loaded\n}\n\nasync function loadShadowDOM(\n  app: App,\n  body: HTMLElement,\n  styles: HTMLElement[]\n) {\n  return new Promise<HTMLElement>((resolve) => {\n    class Berial extends HTMLElement {\n      static get componentName() {\n        return app.name\n      }\n      connectedCallback() {\n        for (const k of styles) {\n          this.shadowRoot?.appendChild(k)\n        }\n        resolve(this)\n      }\n      constructor() {\n        super()\n        this.attachShadow({ mode: 'open' })\n        this.shadowRoot?.appendChild(body)\n      }\n    }\n    const hasDef = window.customElements.get(app.name)\n    if (!hasDef) {\n      customElements.define(app.name, Berial)\n    }\n  })\n}\n\nasync function runUnmount(app: App) {\n  if (app.status != Status.MOUNTED) {\n    return app\n  }\n  app.status = Status.UNMOUNTING\n  await app.unmount(app.props)\n  app.status = Status.NOT_MOUNTED\n  return app\n}\n\nasync function runBootstrap(app: App) {\n  if (app.status !== Status.NOT_BOOTSTRAPPED) {\n    return app\n  }\n  app.status = Status.BOOTSTRAPPING\n  await app.bootstrap(app.props)\n  app.status = Status.NOT_MOUNTED\n  return app\n}\n\nasync function runMount(app: App) {\n  if (app.status !== Status.NOT_MOUNTED) {\n    return app\n  }\n  app.status = Status.MOUNTING\n  await app.mount(app.props)\n  app.status = Status.MOUNTED\n  return app\n}\n\nconst routingEventsListeningTo = ['hashchange', 'popstate']\n\nfunction urlReroute() {\n  reroute()\n}\nconst capturedEvents = {\n  hashchange: [],\n  popstate: []\n} as any\n\nwindow.addEventListener('hashchange', urlReroute)\nwindow.addEventListener('popstate', urlReroute)\nconst originalAddEventListener = window.addEventListener\nconst originalRemoveEventListener = window.removeEventListener\nwindow.addEventListener = function(name: any, fn: any, ...args: any) {\n  if (\n    routingEventsListeningTo.indexOf(name) >= 0 &&\n    !capturedEvents[name].some((l: any) => l == fn)\n  ) {\n    capturedEvents[name].push(fn)\n    return\n  }\n  // @ts-ignore\n  return originalAddEventListener.apply(this, args)\n}\nwindow.removeEventListener = function(name: any, fn: any, ...args: any) {\n  if (routingEventsListeningTo.indexOf(name) >= 0) {\n    capturedEvents[name] = capturedEvents[name].filter((l: any) => l !== fn)\n    return\n  }\n  //@ts-ignore\n  return originalRemoveEventListener.apply(this, args)\n}\n\nfunction patchedUpdateState(updateState: any, ...args: any) {\n  return function() {\n    const urlBefore = window.location.href\n    // @ts-ignore\n    updateState.apply(this, args)\n    const urlAfter = window.location.href\n\n    if (urlBefore !== urlAfter) {\n      // @ts-ignore\n      urlReroute(new PopStateEvent('popstate'))\n    }\n  }\n}\n\nwindow.history.pushState = patchedUpdateState(window.history.pushState)\nwindow.history.replaceState = patchedUpdateState(window.history.replaceState)\n"],"names":[],"mappings":"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"}
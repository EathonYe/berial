{"version":3,"file":"berial.js","sources":["../index.js"],"sourcesContent":["let apps = []\r\n\r\nexport function define(tag, component, route) {\r\n  class Berial extends HTMLElement {\r\n    constructor() {\r\n      super()\r\n      let template = document.createElement('template')\r\n      template.innerHTML = `<!-- ${tag} -- ${route} -->`\r\n      this.attachShadow({\r\n        mode: 'open',\r\n      }).appendChild(template.content.cloneNode(true))\r\n    }\r\n  }\r\n\r\n  const hasDef = window.customElements.get(tag)\r\n  if (!hasDef) {\r\n    customElements.define(tag, Berial)\r\n  }\r\n\r\n  apps.push({\r\n    tag,\r\n    component,\r\n    route,\r\n  })\r\n\r\n  return invoke()\r\n}\r\n\r\nfunction invoke() {\r\n  const path = window.location.hash || window.location.pathname\r\n\r\n  apps.forEach((app) => {\r\n    defer(() => {\r\n      const host = document.querySelector(app.tag)\r\n      if (app.route === path) {\r\n        app.component.mount(host)\r\n      } else {\r\n        app.component.unmount(host)\r\n      }\r\n    })\r\n  })\r\n}\r\n\r\nwindow.addEventListener('hashchange', invoke)\r\nwindow.addEventListener('popstate', invoke)\r\n\r\nvar defer = typeof requestAnimationFrame !== 'undefined' ? requestAnimationFrame : setTimeout\r\n"],"names":[],"mappings":";;;;;;EAAA,IAAI,IAAI,GAAG,GAAE;AACb;EACO,SAAS,MAAM,CAAC,GAAG,EAAE,SAAS,EAAE,KAAK,EAAE;EAC9C,EAAE,MAAM,MAAM,SAAS,WAAW,CAAC;EACnC,IAAI,WAAW,GAAG;EAClB,MAAM,KAAK,GAAE;EACb,MAAM,IAAI,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,UAAU,EAAC;EACvD,MAAM,QAAQ,CAAC,SAAS,GAAG,CAAC,KAAK,EAAE,GAAG,CAAC,IAAI,EAAE,KAAK,CAAC,IAAI,EAAC;EACxD,MAAM,IAAI,CAAC,YAAY,CAAC;EACxB,QAAQ,IAAI,EAAE,MAAM;EACpB,OAAO,CAAC,CAAC,WAAW,CAAC,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,CAAC,EAAC;EACtD,KAAK;EACL,GAAG;AACH;EACA,EAAE,MAAM,MAAM,GAAG,MAAM,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,EAAC;EAC/C,EAAE,IAAI,CAAC,MAAM,EAAE;EACf,IAAI,cAAc,CAAC,MAAM,CAAC,GAAG,EAAE,MAAM,EAAC;EACtC,GAAG;AACH;EACA,EAAE,IAAI,CAAC,IAAI,CAAC;EACZ,IAAI,GAAG;EACP,IAAI,SAAS;EACb,IAAI,KAAK;EACT,GAAG,EAAC;AACJ;EACA,EAAE,OAAO,MAAM,EAAE;EACjB,CAAC;AACD;EACA,SAAS,MAAM,GAAG;EAClB,EAAE,MAAM,IAAI,GAAG,MAAM,CAAC,QAAQ,CAAC,IAAI,IAAI,MAAM,CAAC,QAAQ,CAAC,SAAQ;AAC/D;EACA,EAAE,IAAI,CAAC,OAAO,CAAC,CAAC,GAAG,KAAK;EACxB,IAAI,KAAK,CAAC,MAAM;EAChB,MAAM,MAAM,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,GAAG,CAAC,GAAG,EAAC;EAClD,MAAM,IAAI,GAAG,CAAC,KAAK,KAAK,IAAI,EAAE;EAC9B,QAAQ,GAAG,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAC;EACjC,OAAO,MAAM;EACb,QAAQ,GAAG,CAAC,SAAS,CAAC,OAAO,CAAC,IAAI,EAAC;EACnC,OAAO;EACP,KAAK,EAAC;EACN,GAAG,EAAC;EACJ,CAAC;AACD;EACA,MAAM,CAAC,gBAAgB,CAAC,YAAY,EAAE,MAAM,EAAC;EAC7C,MAAM,CAAC,gBAAgB,CAAC,UAAU,EAAE,MAAM,EAAC;AAC3C;EACA,IAAI,KAAK,GAAG,OAAO,qBAAqB,KAAK,WAAW,GAAG,qBAAqB,GAAG;;;;;;;;;;;;"}